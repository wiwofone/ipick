$.fn.ipick=function(i){var t={closeOnUnfocus:!0,source:"icons.json",iconElement:"i",iconAttribute:"class",iconsPerPage:48,navigationElement:"button",previousText:"Previous",nextText:"Next",onPick:function(){},onClose:function(){}},e=$.extend({},t,i),n=function(i){firstTab=i-1,0==$('*[data-ipick-tab="'+firstTab+'"').length?$(".ipick-nav-previous").hide():$(".ipick-nav-previous").show(),lastTab=i+1,0==$('*[data-ipick-tab="'+lastTab+'"').length?$(".ipick-nav-next").hide():$(".ipick-nav-next").show()},c=function(i){i.remove(),e.onClose()},a=function(i,t){var i=[];$.getJSON(e.source,function(n){i=n.icons,t.remove(".ipick-icons-tab");var c='<div class="ipick-icons-tab ipick-icons-tab-current" data-ipick-tab="1"><table><tr>',a=0,r=0,o=1;i.forEach(function(t){0==a%8&&(c+="</tr><tr>"),0==r%e.iconsPerPage&&0!=r&&(c+="</tr></table></div>",i.length>a&&(a=0,o++,c+='<div class="ipick-icons-tab" data-ipick-tab="'+o+'"><table><tr>')),c+="<td><"+e.iconElement+' data-iconpick-name="'+t+'" '+e.iconAttribute+'="'+t+'"></'+e.iconElement+"></td>",a++,r++}),r==i.length&&(c+="</tr></table></div>"),c+='<div class="ipick-navigation"><'+e.navigationElement+' class="ipick-nav-previous">'+e.previousText+"</"+e.navigationElement+">"+"<"+e.navigationElement+' class="ipick-nav-next">'+e.nextText+"</"+e.navigationElement+">"+"</div>",t.append(c)})},r=function(i){$element=$(this),i.preventDefault(),$(".ipick-container").remove();var t=document.createElement("div");$picker=jQuery(t),$picker.addClass("ipick-container"),a(e.source,$picker),$picker.on("click",".ipick-nav-previous",function(){$currentTab=$(".ipick-icons-tab-current"),prevTab=$currentTab.data("ipick-tab")-1,$currentTab.removeClass("ipick-icons-tab-current"),$('*[data-ipick-tab="'+prevTab+'"').addClass("ipick-icons-tab-current"),n(prevTab)}),$picker.on("click",".ipick-nav-next",function(){$currentTab=$(".ipick-icons-tab-current"),nextTab=$currentTab.data("ipick-tab")+1,$currentTab.removeClass("ipick-icons-tab-current"),$('*[data-ipick-tab="'+nextTab+'"').addClass("ipick-icons-tab-current"),n(nextTab)}),$picker.on("click",".fa",function(i){i.preventDefault();var t=$(this).data("iconpick-name");e.onPick.call(this,t),c($picker)}),$picker.css("top",$(this).offset().top+$(this).height()).css("left",$(this).offset().left).show(),$("body").prepend($picker),n(1),e.closeOnUnfocus&&$(document).on("click",function(i){$element.is(i.target)||$picker.is(i.target)||0!==$picker.has(i.target).length||c($picker)})};return $(this).click(r),this};
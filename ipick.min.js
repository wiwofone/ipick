$.fn.ipick=function(i){var t={closeOnUnfocus:!0,source:"icons.json",iconElement:"i",iconAttribute:"class",iconsPerPage:48,navigationElement:"button",previousText:"Previous",nextText:"Next",onPick:function(){},onClose:function(){}},n=$.extend({},t,i),e=function(i){firstTab=i-1,0==$('*[data-ipick-tab="'+firstTab+'"').length?$(".ipick-nav-previous").hide():$(".ipick-nav-previous").show(),lastTab=i+1,0==$('*[data-ipick-tab="'+lastTab+'"').length?$(".ipick-nav-next").hide():$(".ipick-nav-next").show()},c=function(i){i.remove(),n.onClose()},a=function(i,t){var c=[];$.getJSON(i,function(i){c=i.icons,t.remove(".ipick-icons-tab");var a='<div class="ipick-icons-tab ipick-icons-tab-current" data-ipick-tab="1"><table><tr>',r=0,o=0,s=1;c.forEach(function(i){0==r%8&&(a+="</tr><tr>"),0==o%n.iconsPerPage&&0!=o&&(a+="</tr></table></div>",c.length>r&&(r=0,s++,a+='<div class="ipick-icons-tab" data-ipick-tab="'+s+'"><table><tr>')),a+="<td><"+n.iconElement+' data-iconpick-name="'+i+'" '+n.iconAttribute+'="'+i+'"></'+n.iconElement+"></td>",r++,o++}),o==c.length&&(a+="</tr></table></div>"),t.find(".ipick-icons-tabs-container").html(a),e(0)}).fail(function(){t.find(".ipick-icons-tabs-container").html("No icons were found.")})},r=function(i){$element=$(this),i.preventDefault(),$(".ipick-container").remove();var t=document.createElement("div");$picker=jQuery(t),$picker.addClass("ipick-container"),$picker.html('<div class="ipick-icons-tabs-container"></div><div class="ipick-navigation"></div>');var r="<"+n.navigationElement+' class="ipick-nav-previous">'+n.previousText+"</"+n.navigationElement+">"+"<"+n.navigationElement+' class="ipick-nav-next">'+n.nextText+"</"+n.navigationElement+">";$picker.find(".ipick-navigation").html(r),a(n.source,$picker),$picker.on("click",".ipick-nav-previous",function(){$currentTab=$(".ipick-icons-tab-current"),prevTab=$currentTab.data("ipick-tab")-1,$currentTab.removeClass("ipick-icons-tab-current"),$('*[data-ipick-tab="'+prevTab+'"').addClass("ipick-icons-tab-current"),e(prevTab)}),$picker.on("click",".ipick-nav-next",function(){$currentTab=$(".ipick-icons-tab-current"),nextTab=$currentTab.data("ipick-tab")+1,$currentTab.removeClass("ipick-icons-tab-current"),$('*[data-ipick-tab="'+nextTab+'"').addClass("ipick-icons-tab-current"),e(nextTab)}),$picker.on("click",".fa",function(i){i.preventDefault();var t=$(this).data("iconpick-name");n.onPick.call(this,t),c($picker)}),$picker.css("top",$(this).offset().top+$(this).height()).css("left",$(this).offset().left).show(),$("body").prepend($picker),e(1),n.closeOnUnfocus&&$(document).on("click",function(i){$element.is(i.target)||$picker.is(i.target)||0!==$picker.has(i.target).length||c($picker)})};return $(this).click(r),this};